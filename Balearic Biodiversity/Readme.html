<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Readme</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="pipeline-balearic-biodiversity-data." class="level3">
<h3>Pipeline Balearic Biodiversity data.</h3>
<ol type="1">
<li><p>Create a <strong><em>NEW</em></strong> .csv file with the information contained in the original list. For each group changing the columns’ name as follow: “Taxon”, “Family”, and “Group”. Hereafter: <strong>newList</strong></p></li>
<li><p>Check taxonomy and remove unnecessary words like subgenus or similar.</p>
<h4 id="resolve-taxonomic-name">Resolve taxonomic name</h4></li>
<li><p>To check synonyms and use updated taxonomy, we use the script: <em>01_Taxonomic_check.R</em>. We use the function <em>synonyms</em> from the <em>taxize</em> package to search for possible synonyms. The result is a data frame with two columns: the first with the original name and the second with the possible synonyms. If the value “Not found” is in the second column, it means that the function did not find the record in the reference database, whereas if the value is “No data”, the error 404 was skipped in the function <em>synonyms</em>.</p></li>
<li><p>Once we have the revised taxonomic list obtained with <em>point 3</em>, we can compare the latter with the original list and correct synonym names. If there are “No data” or “Not found” values in the reviewed lit, we need to revise the taxonomy manually.</p></li>
</ol>
<p>Databases uded for synonyms check</p>
<p>|Group| Databse| |Reptilia| ITIS|</p>
<p>### Check taxa distribution</p>
<ol start="3" type="1">
<li><p>In the final checklist, we want only the <em>NATIVE</em> species of Balearic Islands. To do that we use the IUCN information.</p>
<ul>
<li><p>Run the script <strong>01_Distribution_IUCN.R</strong>.</p></li>
<li><p>Check the countries obtained as results.</p></li>
<li><p>Remove the species with improbable distribution in the file created in the <strong>newList</strong>.</p>
<p><strong><em>NOTE:</em></strong> Species with NA values are tho with no information in the IUCN web. Taxa without spatial information have to be checked manually.</p></li>
</ul></li>
<li><p>Create a .xlsx file to contain the original list, the data downloaded from Fauna Europaea and those downloaded from GBIF. (XXX_finalList_YYYY_MM_DD).</p></li>
<li><p>Count the number of words to verify the presence of subspecies or higher taxonomic levels. = LEN(TRIM(A2))-LEN(SUBSTITUTE(A2;” “;”“))+1</p></li>
</ol>
<section id="fauna-europaea-download-info" class="level4">
<h4>FAUNA EUROPAEA DOWNLOAD INFO</h4>
<ol start="6" type="1">
<li>Download spatial information stored in Fauna Europaea (https://fauna-eu.org)</li>
</ol>
<ul>
<li>Run the first chunk R script 02_Download_fauna_europaea.R to download the regional distribution of each taxon based on the original list.</li>
<li>Run the second chunk of the script to retrieve all the species belonging to a specific genus. Then this new list is the base for retrieving information about the distribution of the species.</li>
</ul>
<ol start="7" type="1">
<li>Save two .csv files.</li>
</ol>
<ul>
<li>The first one contains the merged result between the original list and that originated starting from the Genus.</li>
<li>The second one contains the presence/absence information derived from the list of taxa originating from the Genus. This file helps check the doubtful presence.</li>
</ul>
<ol start="8" type="1">
<li>Copy and paste the information in the XXX_finalList_YYYY_MM_DD; sheet  faunaEuropaea.</li>
</ol>
<p>NOTE: If you have a record from the original list saved with NA and the same record is present in the table derived by the genus, this is a new record compared to the original list.</p>
<p>Aeshna cyanea (Muller, 1764) NA NA NA Aeshna cyanea (Muller, 1764) Balearic Is. Present Genus derived</p>
<p>NOTE: if the species have only NA values, the species is not present in the Fauna Europaea.</p>
<ol start="9" type="1">
<li>Create a conditional column “Status (xy)” containing this formula =IF(D2=H2;D2;“doubtful”). Apply to such column 3 conditional formatting: “doubtful” Yellow field; “absent” Red field; “present” Green field.</li>
<li>Carefully check the record and try to fill the empty or NA space.</li>
</ol>
<p>GBIF DOWNLOAD INFO 11) Download spatial information stored in GBIF (https://www.gbif.org) - Run the first chunk R script 03_Download_gbif.R to download the occurrences of the taxa based on the original list. This script produces an R list composed of two objects: - info: Contains information about species name, scientific name, GBIF taxon key, taxonomic status (e.g., synonym, accepted), number of occurrences in Spain, and number of occurrences in the Balearic Islands. The last column presenceAbsence is derived from the number of Balearic occurrences. If &gt;= 5 the species is considered present, otherwise not. - data: Contains spatial information, occurrence sampling events and institution info. - Run the second chunk of the script. As for Fauna Europaea, we retrieve the species starting from the genus. Also in this case, we produce a list containing the objects: info and data. From both the objects we remove fossil specimens and those with 0 occurrences in Spain. 12) Save four .csv files. - The first contains merged information between the original list and that retrieved starting from the genus. - The second contains info retrieved from the species obtained using the genus as the base. - The third contains spatial information on the taxa of the original list. - The fourth contains spatial information derived from the taxa obtained from the genus. 13) Copy and paste the information in the XXX_finalList_YYYY_MM_DD; sheet  gbif. 14) Create a conditional column “Status (xy)” containing this formula =IF(D2=H2;D2;“doubtful”). Apply to such column 3 conditional formatting: “doubtful” Yellow field; “absent” Red field; “present” Green field. 15) Filter removing the taxa with 0 occurrences in column M. 16) Carefully check the record and try to fill the empty on NA space.</p>
<p>MERGE THE INFO 17) In the originalist sheet add the columns: “bioatlas”; “faunaEuropaea”; “gbif”; “total”. 18) Fill the column bioatlas with the string “present”, since the original list was downloaded from bioatlas. Then, fill the other two columns using the function VLOOKUP. 19) Add a temporary column with the following formula: =IF(OR(D2 &lt;&gt; “present”; E2 &lt;&gt; “present”; F2 &lt;&gt; “present”); “check”; “present”). With this formula we consider a species present in the Balearic territory only if all the information sources agree with the present statement. If not we need to check. 20) In the column “total” we can insert the sure presence. We consider the species absent if there are 2 or 3 absent values, or doubtful if there are two present and 1 absent/NA values.</p>
</section>
</section>
</body>
</html>
